<!DOCTYPE html>
<meta charset="utf-8">
<html>
	<head>
		<title>Test</title>
		<script type="text/javascript" src="vivagraph.js"></script>
		<script type="text/javascript" src="d3.min.js"></script>
		<script type="text/javascript">
			function draw(){
				 // Step 1. We create a graph object.
				var graph = Viva.Graph.graph();
				
				var layout = Viva.Graph.Layout.forceDirected(graph);

				var graphics = Viva.Graph.View.svgGraphics();				 
				
				var text = document.getElementById('data').value;
				
				var data = text.split(/\n/);
				
				var radius = {};
				
				for (var i = 0; i < data.length; i++){
					var lineData = data[i].split(',');
					if (lineData.length >= 3){
						graph.addLink(lineData[0], lineData[1]);
						radius[lineData[0]] = 1;
					}
				}
				
				console.log(radius);
				
				graphics.node(function(node){
					return Viva.Graph.svg('circle').attr('r', 10);					 
				});

				var renderer = Viva.Graph.View.renderer(graph, {
					layout: layout,
					graphics: graphics,
					container: document.getElementById('chart')
				});
				
				 
				/* Note: graph.addLink() creates new nodes if they are not yet
				   present in the graph. Thus calling this method is equivalent to:
				   graph.addNode(1);
				   graph.addNode(2);
				   graph.addLink(1, 2);
				*/
				// Step 3. Render the graph.
				var renderer = Viva.Graph.View.renderer(graph);
				renderer.run();
			}
		</script>
		<style type="text/css" media="screen">
			html, body, svg { width: 100%; height: 100%;}
		</style>
	</head>
	<body>
		<textarea id="data"></textarea>
		<button onclick="draw()">Draw</button>
		<div id="chart" height="500" width="500"></div>
	</body>
</html>